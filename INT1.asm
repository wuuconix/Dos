SSTACK SEGMENT STACK
	DW 32 DUP(?)
SSTACK ENDS
CODE SEGMENT
	ASSUME CS:CODE
START:
	PUSH DS
	MOV AX, 0000H
	MOV DS, AX
	MOV AX, OFFSET MIR7 ;取中断入口地址
	MOV SI, 003CH ;中断矢量地址
	MOV [SI], AX ;填 IRQ7 的偏移矢量
	MOV AX, CS ;段地址
	MOV SI, 003EH
	MOV [SI], AX ;填 IRQ7 的段地址矢量
	CLI
	POP DS
	;初始化主片 8259
	MOV AL, 11H 
	OUT 20H, AL 
	MOV AL, 08H
	OUT 21H, AL
	MOV AL, 04H
	OUT 21H, AL 
	MOV AL, 01H	
	OUT 21H, AL
	MOV AL, 6FH
	OUT 21H, AL
	STI
	AA1:
		MOV AX, 0172H ;r
		INT 10H 
		MOV AX, 0175H ;u
		INT 10H 
		MOV AX, 016eH ;n
		INT 10H 
		MOV AX, 010AH ;\r
		INT 10H
		MOV AX, 010DH ;\n
		INT 10H  
		
		MOV CX, 20
	S:
		CALL DELAY
		LOOP S
		
	JMP AA1
	MIR7: 
		STI
		CALL DELAY
		MOV AX, 0149H ;I
		INT 10H 
		MOV AX, 014EH ;N
		INT 10H 
		MOV AX, 0154H ;T
		INT 10H 
		MOV AX, 0131H ;1
		INT 10H
		MOV AX, 010DH ;\r
		INT 10H 
		MOV AX, 010AH ;\n
		INT 10H 
		MOV AL, 20H ;向8259发送EOI的固定格式
		OUT 20H, AL ;中断结束命令
		IRET
	DELAY: 
		PUSH CX
		MOV CX, 0F00H
		AA0: 
			PUSH AX
			POP AX
			LOOP AA0
		POP CX
		RET
CODE ENDS
END START